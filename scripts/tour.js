const imageLibrary = [
    {
        name: "scuba",
        images: [
            "/media/activities/scuba_00.jpg",
            "/media/activities/scuba_01.jpg",
            "/media/activities/scuba_02.jpg",
            "/media/activities/scuba_03.jpg",
            "/media/activities/scuba_04.jpg",
            "/media/activities/scuba_05.jpg",
            "/media/activities/scuba_06.jpg",
            "/media/activities/scuba_07.jpg",
            "/media/activities/scuba_08.jpg",
            "/media/activities/scuba_09.jpg"
        ]
    },
    {
        name: "atv",
        images: [
            "/media/activities/atv/WhatsApp Image 2025-02-23 at 13.57.58_6e3a4fd4.jpg",
            "/media/activities/atv/WhatsApp Image 2025-02-23 at 13.55.22_2d3d7023.jpg",
            "/media/activities/atv/WhatsApp Image 2025-02-23 at 13.55.21_e079109f.jpg",
            "/media/activities/atv/WhatsApp Image 2025-02-23 at 13.55.21_5a49134a.jpg",
            "/media/activities/atv/WhatsApp Image 2025-02-23 at 13.55.22_3f2c094d.jpg",
            "/media/activities/atv/WhatsApp Image 2025-02-23 at 13.55.23_d66ec869.jpg"
        ]
    },
    {
        name: "buenavista",
        images: [
            "/media/activities/buenavista/Screenshot 2025-03-01 085441.png",
            "/media/activities/buenavista/Screenshot 2025-03-01 085705.png",
            "/media/activities/buenavista/Screenshot 2025-03-01 085806.png",
            "/media/activities/buenavista/Screenshot 2025-03-01 085817.png",
            "/media/activities/buenavista/Screenshot 2025-03-01 085843.png",
            "/media/activities/buenavista/Screenshot 2025-03-01 085913.png",
            "/media/activities/buenavista/Screenshot 2025-03-01 085927.png",
            "/media/activities/buenavista/Screenshot 2025-03-01 085941.png",
            "/media/activities/buenavista/Screenshot 2025-03-01 090008.png",
            "/media/activities/buenavista/Screenshot 2025-03-01 090023.png",
            "/media/activities/buenavista/Screenshot 2025-03-01 090054.png",
            "/media/activities/buenavista/Screenshot 2025-03-01 090146.png",
            "/media/activities/buenavista/Screenshot 2025-03-01 090231.png"
        ]
    },
    {
        name: "leona",
        images: [
            "/media/activities/leona/Screenshot 2025-03-01 101201.png",
            "/media/activities/leona/Screenshot 2025-03-01 101237.png",
            "/media/activities/leona/Screenshot 2025-03-01 101308.png",
            "/media/activities/leona/Screenshot 2025-03-01 101357.png",
            "/media/activities/leona/Screenshot 2025-03-01 101413.png",
            "/media/activities/leona/Screenshot\ 2025-03-02\ 080129.png",
            "/media/activities/leona/Screenshot 2025-03-01 101511.png",
            "/media/activities/leona/Screenshot 2025-03-01 101608.png",
            "/media/activities/leona/Screenshot 2025-03-01 101616.png",
            "/media/activities/leona/Screenshot 2025-03-01 101700.png",
            "/media/activities/leona/Screenshot 2025-03-01 101713.png",
            "/media/activities/leona/Screenshot 2025-03-01 101730.png",
            "/media/activities/leona/Screenshot 2025-03-01 101810.png",
            "/media/activities/leona/Screenshot 2025-03-01 101855.png",
        ]
    },
    {
        name: "celeste",
        images: [
            "/media/activities/celeste/Screenshot 2025-03-01 115955.png",
            "/media/activities/celeste/Screenshot 2025-03-01 120023.png",
            "/media/activities/celeste/Screenshot 2025-03-01 120040.png",
            "/media/activities/celeste/Screenshot 2025-03-01 120216.png",
            "/media/activities/celeste/Screenshot 2025-03-01 120238.png",
            "/media/activities/celeste/Screenshot 2025-03-01 120250.png",
            "/media/activities/celeste/Screenshot 2025-03-01 120336.png",
            "/media/activities/celeste/Screenshot 2025-03-01 120415.png",
            "/media/activities/celeste/Screenshot 2025-03-01 120727.png",
            "/media/activities/celeste/Screenshot 2025-03-01 120759.png",
            "/media/activities/celeste/Screenshot 2025-03-01 120821.png",
            "/media/activities/celeste/Screenshot 2025-03-01 120727.png",           
            "/media/activities/celeste/Screenshot 2025-03-01 120759.png"
        ]
    },
    {
        name: "river-float",
        images: [
            "/media/activities/river-float/Screenshot 2025-03-01 132921.png",
            "/media/activities/river-float/Screenshot 2025-03-01 132933.png",
            "/media/activities/river-float/Screenshot 2025-03-01 132946.png",
            "/media/activities/river-float/Screenshot 2025-03-01 133034.png",
            "/media/activities/river-float/Screenshot 2025-03-01 133124.png",
            "/media/activities/river-float/Screenshot 2025-03-01 133134.png",
            "/media/activities/river-float/Screenshot 2025-03-01 133240.png",
            "/media/activities/river-float/Screenshot 2025-03-01 133254.png",
            "/media/activities/river-float/Screenshot 2025-03-01 133311.png",
            "/media/activities/river-float/Screenshot 2025-03-01 133338.png",
            "/media/activities/river-float/Screenshot 2025-03-01 133359.png",
            "/media/activities/river-float/Screenshot 2025-03-01 133415.png",
            "/media/activities/river-float/Screenshot 2025-03-01 133440.png",
            "/media/activities/river-float/Screenshot 2025-03-01 133457.png",
            "/media/activities/river-float/Screenshot 2025-03-01 133512.png"
        ]
    },
    {
        name: "canyon",
        images: [
            "/media/activities/canyon/Screenshot 2025-03-02 072056.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072155.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072204.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072257.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072327.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072344.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072416.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072436.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072456.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072534.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072636.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072646.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072712.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072723.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072739.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072752.png",
            "/media/activities/canyon/Screenshot 2025-03-02 072827.png"
        ]
    }
]



// ----------- QUICK LINKS ----------------

// Get all section elements and nav links
const sections = document.querySelectorAll('.js-section');
const navSectionLinks = document.querySelectorAll('.js-nav-a');

// Function to detect which section is in view
function updateActiveLink() {
    let currentSection = '';

    // Loop through sections to determine which is in the viewport
    sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.offsetHeight;
        if (window.scrollY >= sectionTop - sectionHeight) {
            if (section.getAttribute('id') === "overview"){
                currentSection = section.getAttribute('id');
            }
        }
        
        if (window.scrollY >= sectionTop - sectionHeight * .2) {
            currentSection = section.getAttribute('id');
        }
    });

    // Update active class on nav links
    navSectionLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${currentSection}`) {
            link.classList.add('active');
        }
    });
}

// Attach scroll event listener
window.addEventListener('scroll', updateActiveLink);






// --------- Gallery Slider -----------------------------------



let currentIndex = 0;
const sliderContainer = document.getElementById("sliderContainer");
const galleryButton = document.getElementById('gallery-btn');
const closeSliderBtn = document.getElementById('close-slider-btn');

const sliderImage = document.getElementById("sliderImage");
const loadingSpinner = document.getElementById("loadingSpinner");
const prevBtn = document.querySelector(".prev");
const nextBtn = document.querySelector(".next");

const activity = sliderContainer.dataset.id;
let images =  []

galleryButton.addEventListener('click', () => {openSlider()})
closeSliderBtn.addEventListener('click', () => {closeSlider()})
sliderContainer.addEventListener('click', () => {closeSlider()})

function openSlider() {
    sliderContainer.style.display = "flex";
    for (let i = 0; i < imageLibrary.length; i++){
        let name = imageLibrary[i].name;
        if (name === activity){
            images = imageLibrary[i].images
        }
    }
    loadImage(currentIndex);
}

function closeSlider() {
    if (event.target === sliderContainer || event.target.classList.contains("close-slider")) {
        sliderContainer.style.display = "none";
    }
}

function loadImage(index) {
    sliderImage.style.display = "none"; // Hide previous image
    loadingSpinner.style.display = "block"; // Show loading

    const img = new Image();
    img.src = images[index];

    img.onload = () => {
        sliderImage.src = images[index];
        sliderImage.style.display = "block"; // Show new image
        loadingSpinner.style.display = "none"; // Hide loading
        prevBtn.removeAttribute("disabled");
        nextBtn.removeAttribute("disabled");
    };

    document.addEventListener("keydown", (event) => {
        if (event.key === "ArrowLeft") {
            changeSlide(-1);
        } else if (event.key === "ArrowRight") {
            changeSlide(1);
        } else if (event.key === "Escape") {
            sliderContainer.style.display = "none";
        }
    });
    
}

function changeSlide(direction) {
    prevBtn.setAttribute("disabled", true);
    nextBtn.setAttribute("disabled", true);

    currentIndex = (currentIndex + direction + images.length) % images.length;
    loadImage(currentIndex);
}